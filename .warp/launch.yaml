# QuestCraft Launch Configurations
# Pre-configured launch profiles for different development scenarios

launch_profiles:
  # Development mode with auto-reload
  development:
    name: "üöÄ Development Server"
    description: "Start QuestCraft in development mode with auto-reload"
    command: "npm run dev"
    env:
      NODE_ENV: "development"
      PORT: "5000"
    pre_commands:
      - "echo 'üéÆ Starting QuestCraft Development Server...'"
      - "echo 'üìç URL: http://localhost:5000'"
      - "echo 'üîë Admin: admin@questcraft.com / admin123'"
    working_directory: "."
    auto_restart: true
    
  # Production mode
  production:
    name: "‚ñ∂Ô∏è Production Server"
    description: "Start QuestCraft in production mode"
    command: "npm start"
    env:
      NODE_ENV: "production"
      PORT: "5000"
    pre_commands:
      - "echo 'üè≠ Starting QuestCraft Production Server...'"
      - "npm audit fix --only=prod"
    working_directory: "."
    
  # Database initialization
  database_setup:
    name: "üóÑÔ∏è Database Setup"
    description: "Initialize MongoDB with admin user and sample data"
    command: "npm run init-db"
    pre_commands:
      - "echo 'üîÑ Initializing QuestCraft Database...'"
      - "echo 'üìä This will create:'"
      - "echo '  ‚Ä¢ Admin user (admin@questcraft.com)'"
      - "echo '  ‚Ä¢ Sample quests and badges'"
      - "echo '  ‚Ä¢ Shop items'"
      - "echo '  ‚Ä¢ Sample events'"
    post_commands:
      - "echo '‚úÖ Database initialized successfully!'"
      - "echo 'üîó Start server with: npm run dev'"
    confirm_before_run: true
    
  # Admin user creation only
  create_admin:
    name: "üë§ Create Admin User"
    description: "Create admin user without resetting existing data"
    command: "npm run create-admin"
    pre_commands:
      - "echo 'üëë Creating admin user...'"
      - "echo 'Email: admin@questcraft.com'"
      - "echo 'Password: admin123'"
    post_commands:
      - "echo '‚úÖ Admin user created!'"
      - "echo 'üåê Login at: http://localhost:5000/pages/auth.html'"
      
  # Quick development restart
  fresh_start:
    name: "üîÑ Fresh Development Start"
    description: "Clear logs and restart development server"
    command: "npm run dev"
    pre_commands:
      - "clear"
      - "echo 'üßπ Starting fresh development session...'"
      - "node -e \"require('./config/database')().then(connected => console.log('üóÑÔ∏è Database:', connected ? '‚úÖ Connected' : '‚ùå Disconnected'))\""
    env:
      NODE_ENV: "development"
    working_directory: "."
    
  # System health check
  health_check:
    name: "üîç System Health Check" 
    description: "Check system status, dependencies, and database connection"
    command: "echo 'Health check complete'"
    pre_commands:
      - "echo 'üè• QuestCraft Health Check'"
      - "echo '========================'"
      - "echo 'üì¶ Dependencies:'"
      - "npm list --depth=0 2>/dev/null | head -10"
      - "echo 'üîê Security:'"
      - "npm audit --audit-level=moderate"
      - "echo 'üóÑÔ∏è Database:'"
      - "node -e \"require('./config/database')().then(connected => console.log(connected ? '‚úÖ MongoDB Connected' : '‚ùå MongoDB Failed'))\""
      - "echo 'üåê Port 5000:'"
      - "lsof -ti:5000 >/dev/null && echo '‚ö†Ô∏è Port 5000 in use' || echo '‚úÖ Port 5000 available'"
    post_commands:
      - "echo 'üìã Next steps:'"
      - "echo '  ‚Ä¢ Run: npm run dev (development)'"
      - "echo '  ‚Ä¢ Run: npm run init-db (database setup)'"
      - "echo '  ‚Ä¢ Visit: http://localhost:5000'"

# Quick launch shortcuts
shortcuts:
  d: "development"
  dev: "development" 
  prod: "production"
  db: "database_setup"
  admin: "create_admin"
  fresh: "fresh_start"
  check: "health_check"

# Launch templates for common scenarios  
templates:
  first_time_setup:
    name: "üÜï First Time Setup"
    description: "Complete setup for new QuestCraft installation"
    steps:
      - profile: "health_check"
      - profile: "database_setup"
      - profile: "development"
    estimated_time: "5 minutes"
    
  daily_development:
    name: "‚òÄÔ∏è Daily Development Routine"
    description: "Standard development workflow"
    steps:
      - profile: "fresh_start"
    estimated_time: "30 seconds"
    
  production_deployment:
    name: "üöÄ Production Deployment"
    description: "Prepare and test production deployment"
    steps:
      - profile: "health_check"
      - profile: "production"
    estimated_time: "2 minutes"

# Environment-specific settings
environments:
  development:
    NODE_ENV: "development"
    PORT: "5000" 
    DEBUG: "questcraft:*"
    
  production:
    NODE_ENV: "production"
    PORT: "5000"
    
  testing:
    NODE_ENV: "test"
    PORT: "5001"
    MONGODB_URI: "mongodb://localhost:27017/questcraft_test"